from midiutil import MIDIFile

def keyMapping(testResults):
    print testResults
    #midiKeyMap = dict({"sa": 60, "re": 62, "ga": 64, "ma": 65, "pa": 67, "dha": 69, "ni": 71, "saa": 72})
    dict = {"sa": 60, "re": 62, "ga": 64, "ma": 65, "pa": 67, "dha": 69, "ni": 71, "saa": 72}

    mappedKeys = []
    for symbol in testResults:
        mappedKeys.append(dict[symbol])
    createMidi(mappedKeys)

def createMidi(mappedKeys):
    track = 0
    channel = 0
    time = 0  # In beats
    duration = 1  # In beats
    tempo = 200  # In BPM
    volume = 120  # 0-127, as per the MIDI standard

    MyMIDI = MIDIFile(1)  # One track, defaults to format 1 (tempo track is created automatically)
    MyMIDI.addTempo(track, time, tempo)

    for i, pitch in enumerate(mappedKeys):
        MyMIDI.addNote(track, channel, pitch, time + i, duration, volume)

    with open("MIDI_files/major-scale3.mid", "wb") as output_file:
        MyMIDI.writeFile(output_file)